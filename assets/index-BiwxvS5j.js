import{d as C,r as x,X as k,j as T,c as S,o as h,a as V,G as U,J as F,P as o,H as n,L as w,M as L,at as P}from"./@vue-CwWr8oRs.js";import{E as J,a as M,b as $,c as A,d as H,e as j,f as W,g as q,h as N,i as E,j as G}from"./element-plus-Bp-sStrV.js";import"./lodash-es-C-xrcuFl.js";import"./@vueuse-CxkiKrus.js";import"./@element-plus-DiUAuvwj.js";import"./@popperjs-DB1lLFnh.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BC8lxUvW.js";import"./async-validator-CRx4dHSJ.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-BCLhozDd.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))_(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const b of s.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&_(b)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function _(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();const K={class:"header"},X=C({__name:"HelloWorld",setup(y){const l=x([]),e=k({date:"",name:"",total_money:"",performance_money:"",add_money:"",board_money:""}),_=m=>{const{columns:t,data:d}=m,i=[];return t.forEach((c,f)=>{if(f===0){i[f]="合计";return}else if(f===1){i[f]="";return}if(!d||d.length===0)return i;const g=d.map(p=>Number(p[c.property]));g.every(p=>Number.isNaN(p))||(i[f]=`${g.reduce((p,u)=>{const v=Number(u);return Number.isNaN(v)?p:p+u},0)}`)}),i},a=x(!1),s=()=>{a.value=!a.value},b=()=>{N.confirm("检测到已有相同日期的数据，是否覆盖？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.value[1]={...e,date:e.date},l.value.sort((t,d)=>d.date.localeCompare(t.date)),localStorage.setItem("tableData",JSON.stringify(l.value)),E({type:"success",message:"数据已更新"}),e.date="",e.name="",e.total_money="",e.performance_money="",e.add_money="",e.board_money=""})},B=m=>{const t=l.value.find(d=>d.date===m);e.date=new Date(t.date),e.name=t.name,e.total_money=t.total_money,e.performance_money=t.performance_money,e.add_money=t.add_money,e.board_money=t.board_money,a.value=!0},D=m=>{N.confirm("你确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.value=l.value.filter(t=>t.date!==m),localStorage.setItem("tableData",JSON.stringify(l.value)),E({type:"success",message:"删除成功"})})};return T(()=>{const m=localStorage.getItem("tableData");console.log(JSON.stringify(m)),m?(l.value=JSON.parse(m),console.log(l.value)):l.value=[]}),(m,t)=>{const d=J,i=A,c=$,f=M,g=H,p=j,u=q,v=W;return h(),S("div",null,[V("div",K,[t[6]||(t[6]=V("span",{class:"font-bold text-2xl"},"下店数据",-1)),o(d,{class:"add-btn",type:"primary",onClick:s},{default:n(()=>[w(L(a.value?"关闭新增":"新增下店记录"),1)]),_:1})]),a.value?(h(),U(p,{key:0},{default:n(()=>[o(f,{model:e,style:{"margin-top":"24px"}},{default:n(()=>[o(c,{label:"店名：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.name=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),o(c,{label:"下店时间：","label-width":"140px"},{default:n(()=>[o(g,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=r=>e.date=r),type:"date",placeholder:"选择日期",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"总业绩(一销)：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:e.total_money,"onUpdate:modelValue":t[2]||(t[2]=r=>e.total_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"回款业绩：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:e.performance_money,"onUpdate:modelValue":t[3]||(t[3]=r=>e.performance_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"加选(二销)：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:e.add_money,"onUpdate:modelValue":t[4]||(t[4]=r=>e.add_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"打板：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:e.board_money,"onUpdate:modelValue":t[5]||(t[5]=r=>e.board_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(d,{style:{width:"200px"},type:"primary",onClick:b},{default:n(()=>t[7]||(t[7]=[w("提交")])),_:1})]),_:1})):F("",!0),o(p,{class:"!border-none",shadow:"always"},{default:n(()=>[o(v,{data:l.value,border:"",style:{width:"100%"},"show-summary":"","summary-method":_},{default:n(()=>[o(u,{prop:"date",label:"下店时间",width:"120"}),o(u,{prop:"name","show-overflow-tooltip":"",label:"店名",width:"200"}),o(u,{prop:"total_money",label:"总业绩(一销)",width:"140"}),o(u,{prop:"performance_money",label:"回款业绩",width:"140"}),o(u,{prop:"add_money",label:"加选(二销)",width:"140"}),o(u,{prop:"board_money",label:"打板",width:"140"}),o(u,{label:"操作",width:"180"},{default:n(({row:r})=>[o(d,{type:"primary",onClick:I=>B(r.date)},{default:n(()=>t[8]||(t[8]=[w("修改")])),_:2},1032,["onClick"]),o(d,{type:"primary",onClick:I=>D(r.date)},{default:n(()=>t[9]||(t[9]=[w("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),z=(y,l)=>{const e=y.__vccOpts||y;for(const[_,a]of l)e[_]=a;return e},Q=z(X,[["__scopeId","data-v-65c6e88b"]]),R={class:"app-container"},Y=C({__name:"App",setup(y){return(l,e)=>(h(),S("div",R,[o(Q)]))}}),O=P(Y);O.use(G);O.mount("#app");
