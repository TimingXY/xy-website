import{d as B,r as E,X as T,j as A,c as C,o as N,a as S,G as U,J as Y,P as o,H as d,L as g,M as J,at as L}from"./@vue-CwWr8oRs.js";import{E as P,a as $,b as j,c as H,d as W,e as q,f as G,g as K,h,i as w,j as X}from"./element-plus-DqAjMvjw.js";import{u as V,w as z}from"./xlsx-Btx5Z9-G.js";import{F as Q}from"./file-saver-B8DjtjRN.js";import"./lodash-es-C-xrcuFl.js";import"./@vueuse-CxkiKrus.js";import"./@element-plus-DiUAuvwj.js";import"./@popperjs-DB1lLFnh.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-CWsDMI8D.js";import"./async-validator-CRx4dHSJ.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-BCLhozDd.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))y(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const b of i.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&y(b)}).observe(document,{childList:!0,subtree:!0});function t(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function y(a){if(a.ep)return;a.ep=!0;const i=t(a);fetch(a.href,i)}})();const R={class:"header"},Z=B({__name:"HelloWorld",setup(_){const l=E([]),t=T({date:"",name:"",total_money:"",performance_money:"",add_money:"",board_money:""}),y=n=>{const{columns:e,data:s}=n,r=[];return e.forEach((c,f)=>{if(f===0){r[f]="合计";return}else if(f===1){r[f]="";return}if(!s||s.length===0)return r;const v=s.map(p=>Number(p[c.property]));v.every(p=>Number.isNaN(p))||(r[f]=`${v.reduce((p,u)=>{const x=Number(u);return Number.isNaN(x)?p:p+u},0)}`)}),r},a=E(!1),i=()=>{a.value=!a.value},b=()=>{if(Object.values(t).every(e=>e!==""&&e!==null&&e!==void 0&&e!==0)){console.log(t.date);let e=-1;l.value===null&&l.value.length>0?e=0:e=l.value.findIndex(s=>s.date===t.date),e!=-1?h.confirm("检测到已有相同日期的数据，是否覆盖？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.value[e]={...t},localStorage.setItem("tableData",JSON.stringify(l.value)),w({type:"success",message:"数据已更新"})}):(l.value.push({...t}),localStorage.setItem("tableData",JSON.stringify(l.value)),w({type:"success",message:"新增下店记录成功"}))}else w({type:"warning",message:"数据不完整，请填写所有信息"})},O=n=>{const e=l.value.find(s=>s.date===n);t.date=n,t.name=e.name,t.total_money=e.total_money,t.performance_money=e.performance_money,t.add_money=e.add_money,t.board_money=e.board_money,a.value=!0},k=n=>{h.confirm("你确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.value=l.value.filter(e=>e.date!==n),localStorage.setItem("tableData",JSON.stringify(l.value)),w({type:"success",message:"删除成功"})})};A(()=>{const n=localStorage.getItem("tableData");console.log(JSON.stringify(n)),n?(l.value=JSON.parse(n),console.log(l.value)):l.value=[]});const F=()=>{h.confirm("是否确认导出数据到表格？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(()=>{const n=V.json_to_sheet(l.value),e=V.book_new();V.book_append_sheet(e,n,"数据报表");const s=z(e,{bookType:"xlsx",type:"binary"}),r=new Blob([I(s)],{type:"application/octet-stream"});Q.saveAs(r,"tableData.xlsx")})};function I(n){const e=new ArrayBuffer(n.length),s=new Uint8Array(e);for(let r=0;r<n.length;r++)s[r]=n.charCodeAt(r)&255;return e}return(n,e)=>{const s=P,r=H,c=j,f=$,v=W,p=q,u=K,x=G;return N(),C("div",null,[S("div",R,[e[7]||(e[7]=S("span",{class:"font-bold text-2xl"},"下店数据",-1)),o(s,{class:"add-btn",type:"primary",onClick:F},{default:d(()=>e[6]||(e[6]=[g(" 导出为表格")])),_:1}),o(s,{class:"add-btn",type:"primary",onClick:i},{default:d(()=>[g(J(a.value?"关闭新增":"新增下店记录"),1)]),_:1})]),a.value?(N(),U(p,{key:0},{default:d(()=>[o(f,{model:t,style:{"margin-top":"24px"}},{default:d(()=>[o(c,{label:"店名：","label-width":"140px"},{default:d(()=>[o(r,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=m=>t.name=m),style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),o(c,{label:"下店时间：","label-width":"140px"},{default:d(()=>[o(v,{modelValue:t.date,"onUpdate:modelValue":e[1]||(e[1]=m=>t.date=m),type:"date",placeholder:"选择日期",style:{width:"240px"},format:"YYYY年MM月DD日","value-format":"YYYY年MM月DD日"},null,8,["modelValue"])]),_:1}),o(c,{label:"总业绩(一销)：","label-width":"140px"},{default:d(()=>[o(r,{modelValue:t.total_money,"onUpdate:modelValue":e[2]||(e[2]=m=>t.total_money=m),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"回款业绩：","label-width":"140px"},{default:d(()=>[o(r,{modelValue:t.performance_money,"onUpdate:modelValue":e[3]||(e[3]=m=>t.performance_money=m),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"加选(二销)：","label-width":"140px"},{default:d(()=>[o(r,{modelValue:t.add_money,"onUpdate:modelValue":e[4]||(e[4]=m=>t.add_money=m),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"打板：","label-width":"140px"},{default:d(()=>[o(r,{modelValue:t.board_money,"onUpdate:modelValue":e[5]||(e[5]=m=>t.board_money=m),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(s,{style:{width:"200px"},type:"primary",onClick:b},{default:d(()=>e[8]||(e[8]=[g("提交")])),_:1})]),_:1})):Y("",!0),o(p,{class:"!border-none",shadow:"always"},{default:d(()=>[o(x,{data:l.value,border:"",style:{width:"100%"},"show-summary":"","summary-method":y},{default:d(()=>[o(u,{prop:"date",label:"下店时间"}),o(u,{prop:"name","show-overflow-tooltip":"",label:"店名",width:"200"}),o(u,{prop:"total_money",label:"总业绩(一销)"}),o(u,{prop:"performance_money",label:"回款业绩"}),o(u,{prop:"add_money",label:"加选(二销)"}),o(u,{prop:"board_money",label:"打板"}),o(u,{label:"操作"},{default:d(({row:m})=>[o(s,{type:"primary",onClick:M=>O(m.date)},{default:d(()=>e[9]||(e[9]=[g("修改")])),_:2},1032,["onClick"]),o(s,{type:"primary",onClick:M=>k(m.date)},{default:d(()=>e[10]||(e[10]=[g("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),ee=(_,l)=>{const t=_.__vccOpts||_;for(const[y,a]of l)t[y]=a;return t},te=ee(Z,[["__scopeId","data-v-043cd8ec"]]),oe={class:"app-container"},le=B({__name:"App",setup(_){return(l,t)=>(N(),C("div",oe,[o(te)]))}}),D=L(le);D.use(X);D.mount("#app");
