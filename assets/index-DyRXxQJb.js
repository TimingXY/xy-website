import{d as C,h as x,V as I,f as k,c as S,o as h,a as V,J as T,G as U,M as o,K as n,a2 as g,P as F,ah as P}from"./@vue-DD7Ue3p5.js";import{E as L,a as M,b as $,c as A,d as J,e as H,f as K,g as W,h as N,i as E}from"./element-plus-DI1m5NhU.js";import"./dayjs-BC8lxUvW.js";import"./@popperjs-DB1lLFnh.js";import"./@element-plus-ECZK9T8U.js";import"./lodash-es-CfkSrKhj.js";import"./@vueuse-D7yhTK7Q.js";import"./async-validator-CRx4dHSJ.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@ctrl-r5W6hzzQ.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))_(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const b of s.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&_(b)}).observe(document,{childList:!0,subtree:!0});function e(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function _(a){if(a.ep)return;a.ep=!0;const s=e(a);fetch(a.href,s)}})();const q={class:"header"},G=C({__name:"HelloWorld",setup(y){const l=x([]),e=I({date:"",name:"",total_money:"",performance_money:"",add_money:"",board_money:""}),_=u=>{const{columns:t,data:d}=u,m=[];return t.forEach((c,f)=>{if(f===0){m[f]="合计";return}else if(f===1){m[f]="";return}if(!d||d.length===0)return m;const w=d.map(p=>Number(p[c.property]));w.every(p=>Number.isNaN(p))||(m[f]=`${w.reduce((p,i)=>{const v=Number(i);return Number.isNaN(v)?p:p+i},0)}`)}),m},a=x(!1),s=()=>{a.value=!a.value},b=()=>{N.confirm("检测到已有相同日期的数据，是否覆盖？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.value[1]={...e,date:e.date},l.value.sort((t,d)=>d.date.localeCompare(t.date)),localStorage.setItem("tableData",JSON.stringify(l.value)),E({type:"success",message:"数据已更新"}),e.date="",e.name="",e.total_money="",e.performance_money="",e.add_money="",e.board_money=""})},B=u=>{const t=l.value.find(d=>d.date===u);e.date=new Date(t.date),e.name=t.name,e.total_money=t.total_money,e.performance_money=t.performance_money,e.add_money=t.add_money,e.board_money=t.board_money,a.value=!0},O=u=>{N.confirm("你确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{l.value=l.value.filter(t=>t.date!==u),localStorage.setItem("tableData",JSON.stringify(l.value)),E({type:"success",message:"删除成功"})})};return k(()=>{const u=localStorage.getItem("tableData");u?(l.value=JSON.parse(u),console.log(l.value)):l.value=[]}),(u,t)=>{const d=L,m=A,c=$,f=M,w=J,p=H,i=W,v=K;return h(),S("div",null,[V("div",q,[t[6]||(t[6]=V("span",{class:"font-bold text-2xl"},"下店数据",-1)),o(d,{class:"add-btn",type:"primary",onClick:s},{default:n(()=>[g(F(a.value?"关闭新增":"新增下店记录"),1)]),_:1})]),a.value?(h(),T(p,{key:0},{default:n(()=>[o(f,{model:e,style:{"margin-top":"24px"}},{default:n(()=>[o(c,{label:"店名：","label-width":"140px"},{default:n(()=>[o(m,{modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=r=>e.name=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),o(c,{label:"下店时间：","label-width":"140px"},{default:n(()=>[o(w,{modelValue:e.date,"onUpdate:modelValue":t[1]||(t[1]=r=>e.date=r),type:"date",placeholder:"选择日期",style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"总业绩(一销)：","label-width":"140px"},{default:n(()=>[o(m,{modelValue:e.total_money,"onUpdate:modelValue":t[2]||(t[2]=r=>e.total_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"回款业绩：","label-width":"140px"},{default:n(()=>[o(m,{modelValue:e.performance_money,"onUpdate:modelValue":t[3]||(t[3]=r=>e.performance_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"加选(二销)：","label-width":"140px"},{default:n(()=>[o(m,{modelValue:e.add_money,"onUpdate:modelValue":t[4]||(t[4]=r=>e.add_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"打板：","label-width":"140px"},{default:n(()=>[o(m,{modelValue:e.board_money,"onUpdate:modelValue":t[5]||(t[5]=r=>e.board_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(d,{style:{width:"200px"},type:"primary",onClick:b},{default:n(()=>t[7]||(t[7]=[g("提交")])),_:1})]),_:1})):U("",!0),o(p,{class:"!border-none",shadow:"always"},{default:n(()=>[o(v,{data:l.value,border:"",style:{width:"100%"},"show-summary":"","summary-method":_},{default:n(()=>[o(i,{prop:"date",label:"下店时间",width:"120"}),o(i,{prop:"name","show-overflow-tooltip":"",label:"店名",width:"200"}),o(i,{prop:"total_money",label:"总业绩(一销)",width:"140"}),o(i,{prop:"performance_money",label:"回款业绩",width:"140"}),o(i,{prop:"add_money",label:"加选(二销)",width:"140"}),o(i,{prop:"board_money",label:"打板",width:"140"}),o(i,{label:"操作",width:"180"},{default:n(({row:r})=>[o(d,{type:"primary",onClick:D=>B(r.date)},{default:n(()=>t[8]||(t[8]=[g("修改")])),_:2},1032,["onClick"]),o(d,{type:"primary",onClick:D=>O(r.date)},{default:n(()=>t[9]||(t[9]=[g("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),j=(y,l)=>{const e=y.__vccOpts||y;for(const[_,a]of l)e[_]=a;return e},z=j(G,[["__scopeId","data-v-6b81a1b5"]]),Q={class:"app-container"},R=C({__name:"App",setup(y){return(l,e)=>(h(),S("div",Q,[o(z)]))}});P(R).mount("#app");
