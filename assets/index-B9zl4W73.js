import{d as S,r as V,X as M,j as k,c as D,o as x,a as N,G as F,J as Y,P as o,H as n,L as v,M as U,at as J}from"./@vue-CwWr8oRs.js";import{E as L,a as P,b as T,c as $,d as A,e as j,f as H,g as W,h as E,i as w,j as q}from"./element-plus-Bp-sStrV.js";import"./lodash-es-C-xrcuFl.js";import"./@vueuse-CxkiKrus.js";import"./@element-plus-DiUAuvwj.js";import"./@popperjs-DB1lLFnh.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BC8lxUvW.js";import"./async-validator-CRx4dHSJ.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-BQoi3Ox2.js";import"./@floating-ui-BCLhozDd.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))_(l);new MutationObserver(l=>{for(const s of l)if(s.type==="childList")for(const b of s.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&_(b)}).observe(document,{childList:!0,subtree:!0});function t(l){const s={};return l.integrity&&(s.integrity=l.integrity),l.referrerPolicy&&(s.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?s.credentials="include":l.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function _(l){if(l.ep)return;l.ep=!0;const s=t(l);fetch(l.href,s)}})();const G={class:"header"},K=S({__name:"HelloWorld",setup(y){const a=V([]),t=M({date:"",name:"",total_money:"",performance_money:"",add_money:"",board_money:""}),_=d=>{const{columns:e,data:m}=d,i=[];return e.forEach((c,f)=>{if(f===0){i[f]="合计";return}else if(f===1){i[f]="";return}if(!m||m.length===0)return i;const g=m.map(p=>Number(p[c.property]));g.every(p=>Number.isNaN(p))||(i[f]=`${g.reduce((p,u)=>{const h=Number(u);return Number.isNaN(h)?p:p+u},0)}`)}),i},l=V(!1),s=()=>{l.value=!l.value},b=()=>{if(Object.values(t).every(e=>e!==""&&e!==null&&e!==void 0&&e!==0)){console.log(t.date);let e=-1;a.value===null&&a.value.length>0?e=0:e=a.value.findIndex(m=>m.date===t.date),e!=-1?E.confirm("检测到已有相同日期的数据，是否覆盖？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.value[e]={...t},localStorage.setItem("tableData",JSON.stringify(a.value)),w({type:"success",message:"数据已更新"})}):(a.value.push({...t}),localStorage.setItem("tableData",JSON.stringify(a.value)),w({type:"success",message:"新增下店记录成功"}))}else w({type:"warning",message:"数据不完整，请填写所有信息"})},C=d=>{const e=a.value.find(m=>m.date===d);t.date=d,t.name=e.name,t.total_money=e.total_money,t.performance_money=e.performance_money,t.add_money=e.add_money,t.board_money=e.board_money,l.value=!0},B=d=>{E.confirm("你确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{a.value=a.value.filter(e=>e.date!==d),localStorage.setItem("tableData",JSON.stringify(a.value)),w({type:"success",message:"删除成功"})})};return k(()=>{const d=localStorage.getItem("tableData");console.log(JSON.stringify(d)),d?(a.value=JSON.parse(d),console.log(a.value)):a.value=[]}),(d,e)=>{const m=L,i=$,c=T,f=P,g=A,p=j,u=W,h=H;return x(),D("div",null,[N("div",G,[e[6]||(e[6]=N("span",{class:"font-bold text-2xl"},"下店数据",-1)),o(m,{class:"add-btn",type:"primary",onClick:s},{default:n(()=>[v(U(l.value?"关闭新增":"新增下店记录"),1)]),_:1})]),l.value?(x(),F(p,{key:0},{default:n(()=>[o(f,{model:t,style:{"margin-top":"24px"}},{default:n(()=>[o(c,{label:"店名：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.name=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),o(c,{label:"下店时间：","label-width":"140px"},{default:n(()=>[o(g,{modelValue:t.date,"onUpdate:modelValue":e[1]||(e[1]=r=>t.date=r),type:"date",placeholder:"选择日期",style:{width:"240px"},format:"YYYY年MM月DD日","value-format":"YYYY年MM月DD日"},null,8,["modelValue"])]),_:1}),o(c,{label:"总业绩(一销)：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:t.total_money,"onUpdate:modelValue":e[2]||(e[2]=r=>t.total_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"回款业绩：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:t.performance_money,"onUpdate:modelValue":e[3]||(e[3]=r=>t.performance_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"加选(二销)：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:t.add_money,"onUpdate:modelValue":e[4]||(e[4]=r=>t.add_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(c,{label:"打板：","label-width":"140px"},{default:n(()=>[o(i,{modelValue:t.board_money,"onUpdate:modelValue":e[5]||(e[5]=r=>t.board_money=r),style:{width:"240px"}},null,8,["modelValue"])]),_:1}),o(m,{style:{width:"200px"},type:"primary",onClick:b},{default:n(()=>e[7]||(e[7]=[v("提交")])),_:1})]),_:1})):Y("",!0),o(p,{class:"!border-none",shadow:"always"},{default:n(()=>[o(h,{data:a.value,border:"",style:{width:"100%"},"show-summary":"","summary-method":_},{default:n(()=>[o(u,{prop:"date",label:"下店时间",width:"120"}),o(u,{prop:"name","show-overflow-tooltip":"",label:"店名",width:"200"}),o(u,{prop:"total_money",label:"总业绩(一销)",width:"140"}),o(u,{prop:"performance_money",label:"回款业绩",width:"140"}),o(u,{prop:"add_money",label:"加选(二销)",width:"140"}),o(u,{prop:"board_money",label:"打板",width:"140"}),o(u,{label:"操作",width:"180"},{default:n(({row:r})=>[o(m,{type:"primary",onClick:I=>C(r.date)},{default:n(()=>e[8]||(e[8]=[v("修改")])),_:2},1032,["onClick"]),o(m,{type:"primary",onClick:I=>B(r.date)},{default:n(()=>e[9]||(e[9]=[v("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})])}}}),X=(y,a)=>{const t=y.__vccOpts||y;for(const[_,l]of a)t[_]=l;return t},z=X(K,[["__scopeId","data-v-d37dbe61"]]),Q={class:"app-container"},R=S({__name:"App",setup(y){return(a,t)=>(x(),D("div",Q,[o(z)]))}}),O=J(R);O.use(q);O.mount("#app");
